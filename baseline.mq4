#include "baseline.mqh"

///////////////////////////////////////////////////////////////////////////////////////////////////////
// Abstract Class
///////////////////////////////////////////////////////////////////////////////////////////////////////
Baseline::Baseline(const string txt, int time) : location(0), period(time), symbol(txt), base(0) { }
int Baseline::Calculate() {
   double base = GetBase();
   double close = Close[0];
   switch(location) {
      case -1:
         if(!BaseTrend(base, close)) return 0;
         location = 1;
         break;
      case 1:
         if(BaseTrend(base, close)) return 0;
         location = -1;
         break;
      case 0:
         if(BaseTrend(base, close)) location = 1;
         else location = -1;
         return 0;
   }
   return location;
}


bool Baseline::BaseTrend(double base, double close) {
   if (base < close) return false;
   return true;
}


///////////////////////////////////////////////////////////////////////////////////////////////////////
// IchimokuBase
///////////////////////////////////////////////////////////////////////////////////////////////////////
IchimokuBase::IchimokuBase(const string txt,int time) : Baseline(txt, time) { }                // Constructor
double IchimokuBase::GetBase(void) { return iIchimoku(symbol, period, 9, 26, 52, 2, 0); }          // Returns the value for the base
///////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////
// MovingAverageBase
///////////////////////////////////////////////////////////////////////////////////////////////////////
MovingAverageBase::MovingAverageBase(const string txt, int time) : Baseline(txt, time) { }      // Constructor
double MovingAverageBase::GetBase(void) { return iMA(symbol, period, 14, 0, MODE_SMA, PRICE_CLOSE, 0); }     // Returns the value for the base
///////////////////////////////////////////////////////////////////////////////////////////////////////
